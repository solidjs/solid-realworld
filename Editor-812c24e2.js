import{u as t,c as e,h as s,i,a as r,b as l,F as a,d as o,t as n,e as d}from"./index.js";import{L as c}from"./ListErrors-e7f8dadd.js";const v=n('<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What\'s this article about?"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags"><div class="tag-list"></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button">Publish Article</button></fieldset></form></div></div></div></div>'),g=n('<span class="tag-default tag-pill"><i class="ion-close-round"></i></span>');d(["keyup","click"]);export default({slug:n})=>{const[d,{createArticle:u,updateArticle:f}]=t(),[p,$]=e({tagInput:"",tagList:[]}),h=t=>e=>$(t,e.target.value),_=()=>{p.tagInput&&$((t=>{t.tagList.push(t.tagInput.trim()),t.tagInput=""}))},b=t=>{!p.inProgress&&$("tagList",(e=>e.filter((e=>e!==t))))},m=t=>{switch(t.keyCode){case 13:case 9:case 188:9!==t.keyCode&&t.preventDefault(),_()}},x=t=>{t.preventDefault(),$({inProgress:!0});const{inProgress:e,tagsInput:s,...i}=p;(n?f:u)(i).then((t=>location.hash=`/article/${t.slug}`)).catch((t=>$({errors:t}))).finally((()=>$({inProgress:!1})))};return s((()=>{let t;n&&(t=d.articles[n])&&$(t)})),(()=>{const t=v.cloneNode(!0),e=t.firstChild.firstChild.firstChild,s=e.firstChild,n=s.firstChild.firstChild,d=n.firstChild,u=n.nextSibling,f=u.firstChild,$=u.nextSibling,y=$.firstChild,C=$.nextSibling,P=C.firstChild,k=P.nextSibling,I=C.nextSibling;return i(e,r(c,{get errors(){return p.errors}}),s),l(d,"change",h("title")),l(f,"change",h("description")),l(y,"change",h("body")),P.$$keyup=m,P.addEventListener("blur",_),l(P,"change",h("tagInput")),i(k,r(a,{get each(){return p.tagList},children:t=>(()=>{const e=g.cloneNode(!0),s=e.firstChild;return s.$$click=b,s.$$clickData=t,i(e,t,null),e})()})),I.$$click=x,o((t=>{const e=p.title,s=p.inProgress,i=p.description,r=p.inProgress,l=p.body,a=p.inProgress,o=p.tagInput,n=p.inProgress,c=p.inProgress;return e!==t._v$&&(d.value=t._v$=e),s!==t._v$2&&(d.disabled=t._v$2=s),i!==t._v$3&&(f.value=t._v$3=i),r!==t._v$4&&(f.disabled=t._v$4=r),l!==t._v$5&&(y.value=t._v$5=l),a!==t._v$6&&(y.disabled=t._v$6=a),o!==t._v$7&&(P.value=t._v$7=o),n!==t._v$8&&(P.disabled=t._v$8=n),c!==t._v$9&&(I.disabled=t._v$9=c),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),t})()};
